---
RecipeFormatVersion: "2020-01-25"
ComponentName: "HelloWorldPubSub"
ComponentVersion: "1.0.0"
ComponentType: "aws.greengrass.generic"
ComponentDescription: "This example component shows how to pubslish and
  subscribe\
  \ to topics from a component using IPC operations."
ComponentPublisher: "Me"
ComponentConfiguration:
  DefaultConfiguration:
    Message: "Hello from local pubsub topic"
    Topic: "topic"
    accessControl:
      aws.greengrass.ipc.pubsub:
        HelloWorldPubSub:pubsub:1:
          policyDescription: "Allows access to publish and subscribe to a topic"
          operations:
            - "aws.greengrass#SubscribeToTopic"
            - "aws.greengrass#PublishToTopic"
          resources: ["*"]
Manifests:
  - Platform:
      os: "linux"
      runtime: "*"
    Lifecycle:
      install: |-
        python3 -m venv .venv
        .venv/bin/python3 -m pip install awsiotsdk
      run: |-
        .venv/bin/python3 -u {artifacts:path}/hello_world_pub_sub.py "{configuration:/Topic}" "{configuration:/Message}"
    Artifacts:
      - Uri: "s3://$bucketName$/$testArtifactsDirectory$/hello_world_pub_sub.py"
Lifecycle: {}
