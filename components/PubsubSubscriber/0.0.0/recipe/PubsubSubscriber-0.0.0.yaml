---
RecipeFormatVersion: "2020-01-25"
ComponentName: PubsubSubscriber
ComponentVersion: "0.0.0"
ComponentDescription: Pubsub Generic Subscriber
ComponentPublisher: Amazon
ComponentConfiguration:
  DefaultConfiguration:
    Message: Hello world
    Topic: pubsub
    accessControl:
      aws.greengrass.ipc.pubsub:
        policyId1:
          policyDescription: access to pubsub topics
          operations:
            - "aws.greengrass#SubscribeToTopic"
          resources:
            - "*"
Manifests:
  - Platform:
      os: "linux"
      runtime: "*"
    Lifecycle:
      install: |-
        set -x
        python3 -m venv .venv
        .venv/bin/python3 -m pip install awsiotsdk
      run: |-
        .venv/bin/python3 -u {artifacts:path}/subscriber.py "{configuration:/Topic}" "{configuration:/Message}"
    Artifacts:
      - Uri: "s3://$bucketName$/$testArtifactsDirectory$/subscriber.py"
Lifecycle: {}
